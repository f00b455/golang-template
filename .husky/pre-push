echo "🚀 Running pre-push validation..."
echo "📍 This ensures your changes won't break CI/CD"
echo ""

# Run the full pipeline validation (lint + test + test-bdd + build)
echo "🔍 Running full pipeline validation..."
make validate || {
  echo ""
  echo "❌ Pipeline validation failed!"
  echo "💡 Your push was blocked to prevent CI failures"
  echo ""
  echo "To fix and retry:"
  echo "  1. Fix the issues shown above"
  echo "  2. Commit your fixes: git add -A && git commit -m 'fix: pipeline issues'"
  echo "  3. Push again: git push"
  echo ""
  echo "For quick development iterations, you can also run:"
  echo "  make validate-quick  # Just lint + tests (faster)"
  echo ""
  exit 1
}

echo ""