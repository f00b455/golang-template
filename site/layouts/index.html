{{ define "main" }}
<h1>Welcome to Terminal News Reader</h1>

<p>A minimal Hugo site with RSS feed integration. No fancy styling, just plain HTML content.</p>

<h2>Features</h2>
<ul>
    <li>Story content in markdown</li>
    <li>RSS feed integration from API</li>
    <li>Simple search functionality</li>
    <li>Plain HTML - no CSS styling</li>
</ul>

<h2>Latest Stories</h2>
<ul>
    {{ range first 5 (where .Site.RegularPages "Section" "stories") }}
    <li>
        <a href="{{ .Permalink }}">{{ .Title }}</a> -
        <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
    </li>
    {{ end }}
</ul>

<h2>RSS Feed</h2>
<div id="rss-container">
    <p>Loading RSS feed from API...</p>
</div>

<script>
// Simple RSS feed fetching without any styling
(function() {
    const apiURL = '{{ .Site.Params.apiURL }}';
    const container = document.getElementById('rss-container');

    fetch(apiURL + '/api/rss')
        .then(response => response.json())
        .then(data => {
            if (data && data.items) {
                let html = '<h3>Latest RSS Items</h3><ul>';
                data.items.slice(0, 10).forEach(item => {
                    html += '<li><a href="' + item.link + '">' + item.title + '</a></li>';
                });
                html += '</ul>';
                container.innerHTML = html;
            }
        })
        .catch(error => {
            container.innerHTML = '<p>RSS feed currently unavailable. API may not be running.</p>';
        });
})();
</script>
{{ end }}